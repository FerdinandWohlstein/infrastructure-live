graph TD
    %% C4 System Context - wording
    User((Person: DevOps Engineer))
    PublicUser((Person: Public End User))

    subgraph External_Systems [External Systems]
        Git[External System: Git Hosting
        GitHub / GitLab]
        CI[External System: CI Pipeline
        GitHub Actions / GitLab CI]
        Registry[External System: Container Registry]
        DNS[External System: DNS and TLS Edge
        Cloudflare / Route53]
        Obj[(External System: Object Storage
        S3-Compatible
            Backups / Artifacts)]
    end

    subgraph System_Boundary [Software System: EC2 Instance with
    K3s - Single-Node First]
        WG[Container: WireGuard VPN
        ISO 27001: A.9.2.1]
        API[Container: Kubernetes API
            6443]
        Argo[Container: Argo CD
        GitOps Sync
        ISO 27001: A.12.1.2]
        Ingress[Container: Traefik Ingress
            443
            ISO 27001: A.13.1.1]
        App[Container: Production App]
        Obs[Container: Observability
            LGTM Stack]
    end

    %% Dev + Delivery
    User -- "Pushes manifests & app code" --> Git
    Git -- "Triggers" --> CI
    CI -- "Build & push image" --> Registry
    Argo -- "Pulls desired state" --> Git

    %% Traffic
    PublicUser -- "HTTPS" --> DNS
    DNS -- "Routes" --> Ingress
    Ingress -- "Routes" --> App

    %% Admin / Private Control Plane
    User -- "VPN" --> WG
    WG -- "Private access" --> API
    WG -- "Private access" --> Argo

    %% Runtime dependencies
    App -- "Pull image" --> Registry
    App -- "Metrics/Logs/Traces" --> Obs

    %% Backups - budget-friendly
    System_Boundary -- "Backups" --> Obj

    style System_Boundary fill:#f9f,stroke:#333,stroke-width:2px
    style External_Systems fill:#bbf,stroke:#333,stroke-dasharray: 5 5